<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>소비의 달인</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
        }
        .jua-font {
            font-family: 'Jua', sans-serif;
        }
    </style>
</head>
<body class="bg-blue-100 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-lg mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-8 text-center text-gray-800 jua-font transition-all duration-500">

        <!-- 게임 제목 -->
        <h1 id="game-title" class="text-3xl md:text-4xl font-bold text-blue-600 mb-4">💰 합리적 소비의 달인 🧠</h1>

        <!-- 상태 표시줄 -->
        <div id="status-bar" class="flex justify-around bg-gray-100 p-3 rounded-xl mb-6 text-sm md:text-base hidden">
            <div id="money-display">💵 돈: 100,000원</div>
            <div id="happiness-display">💖 행복: 50</div>
            <div id="eco-score-display">🌏 환경: 50</div>
        </div>

        <!-- 메시지 창 -->
        <div id="message-box" class="min-h-[120px] bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6 flex items-center justify-center">
            <p id="message-text" class="text-lg md:text-xl leading-relaxed"></p>
        </div>

        <!-- 선택지 버튼 -->
        <div id="choices-box" class="grid grid-cols-1 gap-3">
            <!-- 버튼은 JS로 동적 생성됩니다 -->
        </div>

        <!-- 게임 오버 화면 -->
        <div id="end-screen" class="hidden">
             <h2 class="text-2xl font-bold text-indigo-600 mb-4">📊 최종 결과!</h2>
             <div class="bg-indigo-50 rounded-xl p-4 space-y-3 text-left text-lg">
                <p><strong>남은 돈:</strong> <span id="final-money"></span>원</p>
                <p><strong>행복 지수:</strong> <span id="final-happiness"></span></p>
                <p><strong>환경 점수:</strong> <span id="final-eco"></span></p>
                <p class="border-t pt-3 mt-3 border-indigo-200"><strong>🏆 총점:</strong> <span id="total-score"></span>점</p>
             </div>
             <p id="end-message" class="mt-6 text-xl text-indigo-800 bg-indigo-100 p-4 rounded-xl"></p>
             <button onclick="restartGame()" class="mt-6 w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-4 rounded-xl text-xl transition-transform transform hover:scale-105">
                다시하기 🚀
             </button>
        </div>

    </div>

    <script>
        // DOM 요소 가져오기
        const statusBar = document.getElementById('status-bar');
        const messageText = document.getElementById('message-text');
        const choicesBox = document.getElementById('choices-box');
        const endScreen = document.getElementById('end-screen');
        const gameContainer = document.getElementById('game-container');
        const moneyDisplay = document.getElementById('money-display');
        const happinessDisplay = document.getElementById('happiness-display');
        const ecoScoreDisplay = document.getElementById('eco-score-display');

        // 게임 상태 변수
        let money, happiness, eco_score, currentScene;

        // 게임 데이터 (상황 구체화)
        const scenes = {
            start: {
                message: "용돈 10만원으로 6가지 상황을 현명하게 선택해보세요! 잔액💵, 행복😊, 환경🌍 점수가 달라집니다.",
                choices: [
                    { text: "네, 시작할래요!", action: () => showScene('stage1') }
                ]
            },
            stage1: {
                message: "🍪 [1단계] 방과 후, 배가 출출해요. 친한 친구가 '야, 우리 신상 과자랑 음료수 먹으러 편의점 가자!'라고 말하네요. 어떻게 할까요?",
                choices: [
                    { text: "친구랑 신상 과자+음료 세트 먹기", money: -5000, happiness: 10, eco: -3, nextScene: 'stage2' },
                    { text: "미안, 난 집에 가서 먹을게! (하고 거절하기)", money: 0, happiness: 3, eco: 5, nextScene: 'stage2' },
                    { text: "하나 사서 친구랑 반씩 나눠먹기", money: -2000, happiness: 7, eco: 2, nextScene: 'stage2' }
                ]
            },
            stage2: {
                message: "✏️ [2단계] SNS에서 아이돌이 쓴다는 '알록달록 젤리펜' 세트가 유행이에요. 필통에 펜은 많지만... 너무 예뻐서 갖고 싶어요. 어떻게 할까요?",
                choices: [
                    { text: "에라 모르겠다! 유행 펜세트 사기", money: -10000, happiness: 7, eco: -4, nextScene: 'stage3' },
                    { text: "가장 마음에 드는 색 2개만 사기", money: -3000, happiness: 4, eco: 2, nextScene: 'stage3' },
                    { text: "괜찮아, 지금 있는 펜도 충분해!", money: 0, happiness: -1, eco: 5, nextScene: 'stage3' }
                ]
            },
            stage3: {
                message: "🎮 [3단계] 요즘 하는 게임에서 '오늘까지 한정판' 스킨이 나왔어요! 친구들은 이미 다 샀다고 단톡방에서 자랑해요. 당신은?",
                choices: [
                    { text: "나도 질 수 없지! 한정판 스킨 결제", money: -8000, happiness: 10, eco: -3, nextScene: 'stage4' },
                    { text: "나는 기본 스킨으로 만족할래", money: 0, happiness: -1, eco: 2, nextScene: 'stage4' },
                    { text: "부모님께 졸라서 가족 계정으로 반값 결제", money: -4000, happiness: 6, eco: 1, nextScene: 'stage4' }
                ]
            },
            stage4: {
                message: "🚌 [4단계] 친구 집까지 버스로 20분, 택시로는 5분! 그런데 밖은 조금 덥고, 약속 시간은 넉넉해요. 어떻게 갈까요?",
                choices: [
                    { text: "빠르고 시원하게 택시 타기", money: -15000, happiness: 6, eco: -4, nextScene: 'stage5' },
                    { text: "조금 덥지만, 창밖 보며 버스 타기", money: -2000, happiness: 3, eco: 2, nextScene: 'stage5' },
                    { text: "(35분 거리) 운동 삼아 걸어가기", money: 0, happiness: -2, eco: 4, nextScene: 'stage5' }
                ]
            },
            stage5: {
                message: "🎁 [5단계] 제일 친한 친구의 생일이 다가와요. 친구가 요즘 유행하는 브랜드 키링을 갖고 싶어 하는 눈치예요. 무엇을 선물할까요?",
                choices: [
                    { text: "친구가 원하던 브랜드 키링 선물하기", money: -10000, happiness: 8, eco: -2, nextScene: 'stage6' },
                    { text: "직접 구운 쿠키와 정성 가득 손편지", money: -3000, happiness: 10, eco: 3, nextScene: 'stage6' },
                    { text: "진심을 담아 카톡으로 축하 메시지 보내기", money: 0, happiness: -1, eco: 1, nextScene: 'stage6' }
                ]
            },
            stage6: {
                message: "📒 [6단계] 수학 노트가 딱 5장 남았어요. 새 학기도 다가오는데, 새 노트를 살까요? 아니면 남은 노트를 마저 쓸까요?",
                choices: [
                    { text: "새 학년이니까! 새 노트 기분 좋게 사기", money: -5000, happiness: 4, eco: -3, nextScene: 'end' },
                    { text: "남은 5장 알뜰하게 마저 쓰기", money: 0, happiness: 2, eco: 5, nextScene: 'end' },
                    { text: "안 쓰는 다른 과목 노트랑 바꾸기", money: -1000, happiness: 3, eco: 4, nextScene: 'end' }
                ]
            }
        };

        // 게임 초기화 함수
        function initGame() {
            money = 100000;
            happiness = 50;
            eco_score = 50;
            updateStatus();
            showScene('start');
        }

        // 장면을 보여주는 함수
        function showScene(sceneName) {
            currentScene = scenes[sceneName];
            
            if (sceneName === 'stage1' && statusBar.classList.contains('hidden')) {
                statusBar.classList.remove('hidden');
            }

            let i = 0;
            messageText.innerHTML = '';
            const message = currentScene.message;
            function typeWriter() {
                if (i < message.length) {
                    messageText.innerHTML += message.charAt(i);
                    i++;
                    setTimeout(typeWriter, 30);
                } else {
                    displayChoices();
                }
            }
            typeWriter();
        }

        function displayChoices() {
            choicesBox.innerHTML = '';
            currentScene.choices.forEach(choice => {
                const button = document.createElement('button');
                button.innerText = choice.text;
                button.className = "w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-xl text-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400";
                button.onclick = () => selectChoice(choice);
                choicesBox.appendChild(button);
            });
        }

        function selectChoice(choice) {
            if (choice.action) {
                choice.action();
            } else {
                money += choice.money || 0;
                happiness += choice.happiness || 0;
                eco_score += choice.eco || 0;
                
                happiness = Math.max(0, happiness);
                eco_score = Math.max(0, eco_score);

                updateStatus();
                if (choice.nextScene === 'end') {
                    endGame();
                } else {
                    showScene(choice.nextScene);
                }
            }
        }

        function updateStatus() {
            moneyDisplay.innerText = `💵 돈: ${money.toLocaleString()}원`;
            happinessDisplay.innerText = `💖 행복: ${happiness}`;
            ecoScoreDisplay.innerText = `🌏 환경: ${eco_score}`;
        }
        
        function getScoreBar(score, emoji) {
            const filledCount = Math.floor(Math.max(0, score) / 10);
            const emptyCount = 10 - filledCount;
            return emoji.repeat(filledCount) + '⚪️'.repeat(emptyCount) + ` (${score})`;
        }

        function endGame() {
            statusBar.classList.add('hidden');
            document.getElementById('message-box').classList.add('hidden');
            choicesBox.classList.add('hidden');
            document.getElementById('game-title').innerText = "📊 최종 결과";

            document.getElementById('final-money').innerText = money.toLocaleString();
            document.getElementById('final-happiness').innerText = getScoreBar(happiness, '😊');
            document.getElementById('final-eco').innerText = getScoreBar(eco_score, '🌍');
            
            const totalScore = Math.round(money / 2000 + happiness + eco_score);
            document.getElementById('total-score').innerText = totalScore;

            let message = "🤔 다음엔 더 현명하게 소비해봐요!";
            if (money >= 30000 && happiness >= 50 && eco_score >= 50) {
                message = "💎 당신은 지갑, 마음, 지구 모두를 지킨 완벽한 소비자예요!";
            } else if (money < 10000) {
                message = "💸 즐거웠지만, 통장이 텅 비었어요…";
            } else if (happiness < 40) {
                message = "😐 돈은 남았지만 행복은 줄었어요.";
            } else if (eco_score >= 70) {
                message = "🌿 지구가 당신의 선택에 미소 짓고 있어요!";
            } else if (money < 0) {
                message = "🚨 앗! 용돈을 초과했어요. 계획적인 소비가 필요해요!";
            }

            document.getElementById('end-message').innerText = message;
            endScreen.classList.remove('hidden');
        }
        
        function restartGame() {
            endScreen.classList.add('hidden');
            document.getElementById('message-box').classList.remove('hidden');
            document.getElementById('game-title').innerText = "💰 합리적 소비의 달인 🧠";
            initGame();
        }

        window.onload = initGame;
    </script>
</body>
</html>

