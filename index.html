<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œë¹„ì˜ ë‹¬ì¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
        }
        .jua-font {
            font-family: 'Jua', sans-serif;
        }
    </style>
</head>
<body class="bg-blue-100 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-lg mx-auto bg-white rounded-2xl shadow-2xl p-6 md:p-8 text-center text-gray-800 jua-font transition-all duration-500">

        <!-- ê²Œì„ ì œëª© -->
        <h1 id="game-title" class="text-3xl md:text-4xl font-bold text-blue-600 mb-4">ğŸ’° í•©ë¦¬ì  ì†Œë¹„ì˜ ë‹¬ì¸ ğŸ§ </h1>

        <!-- ìƒíƒœ í‘œì‹œì¤„ -->
        <div id="status-bar" class="flex justify-around bg-gray-100 p-3 rounded-xl mb-6 text-sm md:text-base hidden">
            <div id="money-display">ğŸ’µ ëˆ: 100,000ì›</div>
            <div id="happiness-display">ğŸ’– í–‰ë³µ: 50</div>
            <div id="eco-score-display">ğŸŒ í™˜ê²½: 50</div>
        </div>

        <!-- ë©”ì‹œì§€ ì°½ -->
        <div id="message-box" class="min-h-[120px] bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-6 flex items-center justify-center">
            <p id="message-text" class="text-lg md:text-xl leading-relaxed"></p>
        </div>

        <!-- ì„ íƒì§€ ë²„íŠ¼ -->
        <div id="choices-box" class="grid grid-cols-1 gap-3">
            <!-- ë²„íŠ¼ì€ JSë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ê²Œì„ ì˜¤ë²„ í™”ë©´ -->
        <div id="end-screen" class="hidden">
             <h2 class="text-2xl font-bold text-indigo-600 mb-4">ğŸ“Š ìµœì¢… ê²°ê³¼!</h2>
             <div class="bg-indigo-50 rounded-xl p-4 space-y-3 text-left text-lg">
                <p><strong>ë‚¨ì€ ëˆ:</strong> <span id="final-money"></span>ì›</p>
                <p><strong>í–‰ë³µ ì§€ìˆ˜:</strong> <span id="final-happiness"></span></p>
                <p><strong>í™˜ê²½ ì ìˆ˜:</strong> <span id="final-eco"></span></p>
                <p class="border-t pt-3 mt-3 border-indigo-200"><strong>ğŸ† ì´ì :</strong> <span id="total-score"></span>ì </p>
             </div>
             <p id="end-message" class="mt-6 text-xl text-indigo-800 bg-indigo-100 p-4 rounded-xl"></p>
             <button onclick="restartGame()" class="mt-6 w-full bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-4 rounded-xl text-xl transition-transform transform hover:scale-105">
                ë‹¤ì‹œí•˜ê¸° ğŸš€
             </button>
        </div>

    </div>

    <script>
        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const statusBar = document.getElementById('status-bar');
        const messageText = document.getElementById('message-text');
        const choicesBox = document.getElementById('choices-box');
        const endScreen = document.getElementById('end-screen');
        const gameContainer = document.getElementById('game-container');
        const moneyDisplay = document.getElementById('money-display');
        const happinessDisplay = document.getElementById('happiness-display');
        const ecoScoreDisplay = document.getElementById('eco-score-display');

        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let money, happiness, eco_score, currentScene;

        // ê²Œì„ ë°ì´í„° (ìƒí™© êµ¬ì²´í™”)
        const scenes = {
            start: {
                message: "ìš©ëˆ 10ë§Œì›ìœ¼ë¡œ 6ê°€ì§€ ìƒí™©ì„ í˜„ëª…í•˜ê²Œ ì„ íƒí•´ë³´ì„¸ìš”! ì”ì•¡ğŸ’µ, í–‰ë³µğŸ˜Š, í™˜ê²½ğŸŒ ì ìˆ˜ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.",
                choices: [
                    { text: "ë„¤, ì‹œì‘í• ë˜ìš”!", action: () => showScene('stage1') }
                ]
            },
            stage1: {
                message: "ğŸª [1ë‹¨ê³„] ë°©ê³¼ í›„, ë°°ê°€ ì¶œì¶œí•´ìš”. ì¹œí•œ ì¹œêµ¬ê°€ 'ì•¼, ìš°ë¦¬ ì‹ ìƒ ê³¼ìë‘ ìŒë£Œìˆ˜ ë¨¹ìœ¼ëŸ¬ í¸ì˜ì  ê°€ì!'ë¼ê³  ë§í•˜ë„¤ìš”. ì–´ë–»ê²Œ í• ê¹Œìš”?",
                choices: [
                    { text: "ì¹œêµ¬ë‘ ì‹ ìƒ ê³¼ì+ìŒë£Œ ì„¸íŠ¸ ë¨¹ê¸°", money: -5000, happiness: 10, eco: -3, nextScene: 'stage2' },
                    { text: "ë¯¸ì•ˆ, ë‚œ ì§‘ì— ê°€ì„œ ë¨¹ì„ê²Œ! (í•˜ê³  ê±°ì ˆí•˜ê¸°)", money: 0, happiness: 3, eco: 5, nextScene: 'stage2' },
                    { text: "í•˜ë‚˜ ì‚¬ì„œ ì¹œêµ¬ë‘ ë°˜ì”© ë‚˜ëˆ ë¨¹ê¸°", money: -2000, happiness: 7, eco: 2, nextScene: 'stage2' }
                ]
            },
            stage2: {
                message: "âœï¸ [2ë‹¨ê³„] SNSì—ì„œ ì•„ì´ëŒì´ ì“´ë‹¤ëŠ” 'ì•Œë¡ë‹¬ë¡ ì ¤ë¦¬íœ' ì„¸íŠ¸ê°€ ìœ í–‰ì´ì—ìš”. í•„í†µì— íœì€ ë§ì§€ë§Œ... ë„ˆë¬´ ì˜ˆë»ì„œ ê°–ê³  ì‹¶ì–´ìš”. ì–´ë–»ê²Œ í• ê¹Œìš”?",
                choices: [
                    { text: "ì—ë¼ ëª¨ë¥´ê² ë‹¤! ìœ í–‰ íœì„¸íŠ¸ ì‚¬ê¸°", money: -10000, happiness: 7, eco: -4, nextScene: 'stage3' },
                    { text: "ê°€ì¥ ë§ˆìŒì— ë“œëŠ” ìƒ‰ 2ê°œë§Œ ì‚¬ê¸°", money: -3000, happiness: 4, eco: 2, nextScene: 'stage3' },
                    { text: "ê´œì°®ì•„, ì§€ê¸ˆ ìˆëŠ” íœë„ ì¶©ë¶„í•´!", money: 0, happiness: -1, eco: 5, nextScene: 'stage3' }
                ]
            },
            stage3: {
                message: "ğŸ® [3ë‹¨ê³„] ìš”ì¦˜ í•˜ëŠ” ê²Œì„ì—ì„œ 'ì˜¤ëŠ˜ê¹Œì§€ í•œì •íŒ' ìŠ¤í‚¨ì´ ë‚˜ì™”ì–´ìš”! ì¹œêµ¬ë“¤ì€ ì´ë¯¸ ë‹¤ ìƒ€ë‹¤ê³  ë‹¨í†¡ë°©ì—ì„œ ìë‘í•´ìš”. ë‹¹ì‹ ì€?",
                choices: [
                    { text: "ë‚˜ë„ ì§ˆ ìˆ˜ ì—†ì§€! í•œì •íŒ ìŠ¤í‚¨ ê²°ì œ", money: -8000, happiness: 10, eco: -3, nextScene: 'stage4' },
                    { text: "ë‚˜ëŠ” ê¸°ë³¸ ìŠ¤í‚¨ìœ¼ë¡œ ë§Œì¡±í• ë˜", money: 0, happiness: -1, eco: 2, nextScene: 'stage4' },
                    { text: "ë¶€ëª¨ë‹˜ê»˜ ì¡¸ë¼ì„œ ê°€ì¡± ê³„ì •ìœ¼ë¡œ ë°˜ê°’ ê²°ì œ", money: -4000, happiness: 6, eco: 1, nextScene: 'stage4' }
                ]
            },
            stage4: {
                message: "ğŸšŒ [4ë‹¨ê³„] ì¹œêµ¬ ì§‘ê¹Œì§€ ë²„ìŠ¤ë¡œ 20ë¶„, íƒì‹œë¡œëŠ” 5ë¶„! ê·¸ëŸ°ë° ë°–ì€ ì¡°ê¸ˆ ë¥ê³ , ì•½ì† ì‹œê°„ì€ ë„‰ë„‰í•´ìš”. ì–´ë–»ê²Œ ê°ˆê¹Œìš”?",
                choices: [
                    { text: "ë¹ ë¥´ê³  ì‹œì›í•˜ê²Œ íƒì‹œ íƒ€ê¸°", money: -15000, happiness: 6, eco: -4, nextScene: 'stage5' },
                    { text: "ì¡°ê¸ˆ ë¥ì§€ë§Œ, ì°½ë°– ë³´ë©° ë²„ìŠ¤ íƒ€ê¸°", money: -2000, happiness: 3, eco: 2, nextScene: 'stage5' },
                    { text: "(35ë¶„ ê±°ë¦¬) ìš´ë™ ì‚¼ì•„ ê±¸ì–´ê°€ê¸°", money: 0, happiness: -2, eco: 4, nextScene: 'stage5' }
                ]
            },
            stage5: {
                message: "ğŸ [5ë‹¨ê³„] ì œì¼ ì¹œí•œ ì¹œêµ¬ì˜ ìƒì¼ì´ ë‹¤ê°€ì™€ìš”. ì¹œêµ¬ê°€ ìš”ì¦˜ ìœ í–‰í•˜ëŠ” ë¸Œëœë“œ í‚¤ë§ì„ ê°–ê³  ì‹¶ì–´ í•˜ëŠ” ëˆˆì¹˜ì˜ˆìš”. ë¬´ì—‡ì„ ì„ ë¬¼í• ê¹Œìš”?",
                choices: [
                    { text: "ì¹œêµ¬ê°€ ì›í•˜ë˜ ë¸Œëœë“œ í‚¤ë§ ì„ ë¬¼í•˜ê¸°", money: -10000, happiness: 8, eco: -2, nextScene: 'stage6' },
                    { text: "ì§ì ‘ êµ¬ìš´ ì¿ í‚¤ì™€ ì •ì„± ê°€ë“ ì†í¸ì§€", money: -3000, happiness: 10, eco: 3, nextScene: 'stage6' },
                    { text: "ì§„ì‹¬ì„ ë‹´ì•„ ì¹´í†¡ìœ¼ë¡œ ì¶•í•˜ ë©”ì‹œì§€ ë³´ë‚´ê¸°", money: 0, happiness: -1, eco: 1, nextScene: 'stage6' }
                ]
            },
            stage6: {
                message: "ğŸ“’ [6ë‹¨ê³„] ìˆ˜í•™ ë…¸íŠ¸ê°€ ë”± 5ì¥ ë‚¨ì•˜ì–´ìš”. ìƒˆ í•™ê¸°ë„ ë‹¤ê°€ì˜¤ëŠ”ë°, ìƒˆ ë…¸íŠ¸ë¥¼ ì‚´ê¹Œìš”? ì•„ë‹ˆë©´ ë‚¨ì€ ë…¸íŠ¸ë¥¼ ë§ˆì € ì“¸ê¹Œìš”?",
                choices: [
                    { text: "ìƒˆ í•™ë…„ì´ë‹ˆê¹Œ! ìƒˆ ë…¸íŠ¸ ê¸°ë¶„ ì¢‹ê²Œ ì‚¬ê¸°", money: -5000, happiness: 4, eco: -3, nextScene: 'end' },
                    { text: "ë‚¨ì€ 5ì¥ ì•Œëœ°í•˜ê²Œ ë§ˆì € ì“°ê¸°", money: 0, happiness: 2, eco: 5, nextScene: 'end' },
                    { text: "ì•ˆ ì“°ëŠ” ë‹¤ë¥¸ ê³¼ëª© ë…¸íŠ¸ë‘ ë°”ê¾¸ê¸°", money: -1000, happiness: 3, eco: 4, nextScene: 'end' }
                ]
            }
        };

        // ê²Œì„ ì´ˆê¸°í™” í•¨ìˆ˜
        function initGame() {
            money = 100000;
            happiness = 50;
            eco_score = 50;
            updateStatus();
            showScene('start');
        }

        // ì¥ë©´ì„ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜
        function showScene(sceneName) {
            currentScene = scenes[sceneName];
            
            if (sceneName === 'stage1' && statusBar.classList.contains('hidden')) {
                statusBar.classList.remove('hidden');
            }

            let i = 0;
            messageText.innerHTML = '';
            const message = currentScene.message;
            function typeWriter() {
                if (i < message.length) {
                    messageText.innerHTML += message.charAt(i);
                    i++;
                    setTimeout(typeWriter, 30);
                } else {
                    displayChoices();
                }
            }
            typeWriter();
        }

        function displayChoices() {
            choicesBox.innerHTML = '';
            currentScene.choices.forEach(choice => {
                const button = document.createElement('button');
                button.innerText = choice.text;
                button.className = "w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-xl text-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-400";
                button.onclick = () => selectChoice(choice);
                choicesBox.appendChild(button);
            });
        }

        function selectChoice(choice) {
            if (choice.action) {
                choice.action();
            } else {
                money += choice.money || 0;
                happiness += choice.happiness || 0;
                eco_score += choice.eco || 0;
                
                happiness = Math.max(0, happiness);
                eco_score = Math.max(0, eco_score);

                updateStatus();
                if (choice.nextScene === 'end') {
                    endGame();
                } else {
                    showScene(choice.nextScene);
                }
            }
        }

        function updateStatus() {
            moneyDisplay.innerText = `ğŸ’µ ëˆ: ${money.toLocaleString()}ì›`;
            happinessDisplay.innerText = `ğŸ’– í–‰ë³µ: ${happiness}`;
            ecoScoreDisplay.innerText = `ğŸŒ í™˜ê²½: ${eco_score}`;
        }
        
        function getScoreBar(score, emoji) {
            const filledCount = Math.floor(Math.max(0, score) / 10);
            const emptyCount = 10 - filledCount;
            return emoji.repeat(filledCount) + 'âšªï¸'.repeat(emptyCount) + ` (${score})`;
        }

        function endGame() {
            statusBar.classList.add('hidden');
            document.getElementById('message-box').classList.add('hidden');
            choicesBox.classList.add('hidden');
            document.getElementById('game-title').innerText = "ğŸ“Š ìµœì¢… ê²°ê³¼";

            document.getElementById('final-money').innerText = money.toLocaleString();
            document.getElementById('final-happiness').innerText = getScoreBar(happiness, 'ğŸ˜Š');
            document.getElementById('final-eco').innerText = getScoreBar(eco_score, 'ğŸŒ');
            
            const totalScore = Math.round(money / 2000 + happiness + eco_score);
            document.getElementById('total-score').innerText = totalScore;

            let message = "ğŸ¤” ë‹¤ìŒì—” ë” í˜„ëª…í•˜ê²Œ ì†Œë¹„í•´ë´ìš”!";
            if (money >= 30000 && happiness >= 50 && eco_score >= 50) {
                message = "ğŸ’ ë‹¹ì‹ ì€ ì§€ê°‘, ë§ˆìŒ, ì§€êµ¬ ëª¨ë‘ë¥¼ ì§€í‚¨ ì™„ë²½í•œ ì†Œë¹„ìì˜ˆìš”!";
            } else if (money < 10000) {
                message = "ğŸ’¸ ì¦ê±°ì› ì§€ë§Œ, í†µì¥ì´ í…… ë¹„ì—ˆì–´ìš”â€¦";
            } else if (happiness < 40) {
                message = "ğŸ˜ ëˆì€ ë‚¨ì•˜ì§€ë§Œ í–‰ë³µì€ ì¤„ì—ˆì–´ìš”.";
            } else if (eco_score >= 70) {
                message = "ğŸŒ¿ ì§€êµ¬ê°€ ë‹¹ì‹ ì˜ ì„ íƒì— ë¯¸ì†Œ ì§“ê³  ìˆì–´ìš”!";
            } else if (money < 0) {
                message = "ğŸš¨ ì•—! ìš©ëˆì„ ì´ˆê³¼í–ˆì–´ìš”. ê³„íšì ì¸ ì†Œë¹„ê°€ í•„ìš”í•´ìš”!";
            }

            document.getElementById('end-message').innerText = message;
            endScreen.classList.remove('hidden');
        }
        
        function restartGame() {
            endScreen.classList.add('hidden');
            document.getElementById('message-box').classList.remove('hidden');
            document.getElementById('game-title').innerText = "ğŸ’° í•©ë¦¬ì  ì†Œë¹„ì˜ ë‹¬ì¸ ğŸ§ ";
            initGame();
        }

        window.onload = initGame;
    </script>
</body>
</html>

